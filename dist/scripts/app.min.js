angular.module("hashtuber",["ui.router","ngRoute"]).constant("Config",{apiBase:"/app/search/",colors:["#6caff1","#ff5967","#ff794d","#5082e5","#be5fb6","#33ccbe","#ffaf40","#68bf60","#cccc52","#f279ac","#7870cc","#548899"]}).config(function($stateProvider,$urlRouterProvider,$locationProvider){$stateProvider.state("hashtag",{url:"/search/{hashtag}?",templateUrl:"../views/base/_tweets.html",params:{hashtag:{squash:!0}}}).state("home",{url:"/",controller:"homeCtrl",templateUrl:"../views/base/_home.html"}),$urlRouterProvider.otherwise("/"),$locationProvider.html5Mode(!0)}),angular.module("hashtuber").controller("homeCtrl",function($scope,$element,randomcolor){$el=$($element),$info=$el.find("h2"),$info.css("color",randomcolor.getRandomColor())}),angular.module("hashtuber").directive("hashheader",function(){return{restrict:"E",replace:!0,templateUrl:"../views/base/hashheader.html",controller:function($scope,gethashtag,randomcolor,$element,$timeout){var $el=$($element),$input=$el.find("#title"),randomColor=function(){var color=randomcolor.getRandomColor();return randomcolor.setHeaderColor(color),color};$input.css("color",randomColor()),$scope.search="#HashTuber",$scope.lastSearch="HashTuber",$input.on("focus",function(){$scope.search="",$scope.$apply()}),$input.blur(function(){$scope.search="#"+$scope.lastSearch,$scope.$apply()}),$scope.searchHashtag=function(){$scope.search=$scope.search.replace(/ /g,""),$scope.search=$scope.search.replace(/#/g,""),$scope.lastSearch!=$scope.search&&($scope.lastSearch=$scope.search,$scope.search="#"+$scope.search),$input.blur()}}}}),angular.module("hashtuber").filter("tweetLinky",["$filter",function($filter){return function(text,target){if(!text)return text;var replacedText=$filter("linky")(text,target),targetAttr="";angular.isDefined(target)&&(targetAttr=' target="'+target+'"');var replacePattern1=/(^|\s)#(\w*[a-zA-Z_]+\w*)/gim;replacedText=text.replace(replacePattern1,'$1<a href="https://twitter.com/search?q=%23$2"'+targetAttr+'">#$2</a>');var replacePattern2=/(^|\s)\@(\w*[a-zA-Z_]+\w*)/gim;return replacedText=replacedText.replace(replacePattern2,'$1<a href="https://twitter.com/$2"'+targetAttr+">@$2</a>")}}]),angular.module("hashtuber").service("api",function($http,$q,Config){return{call:function(params,data,callback,method){method=method?method:"GET";var canceler=$q.defer();return $http({url:Config.apiBase,method:method,params:params.hashtag,timeout:canceler.promise,data:data}).success(function(data,status){"function"==typeof callback&&callback(data)}),{cancel:function(){canceler.resolve()}}}}}),angular.module("hashtuber").service("gethashtag",function($http,api,$rootScope){}),angular.module("hashtuber").service("randomcolor",function(Config){var headerColor;return{getRandomColor:function(){var index=Math.floor(Math.random()*Config.colors.length);return Config.colors[index]},setHeaderColor:function(color){headerColor=color},getHeaderColor:function(){return headerColor}}});